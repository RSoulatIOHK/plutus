<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Chain.Update.Validation.Interface</title><link href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-ProtocolMagic.html#t:ProtocolMagicId" title="Cardano.Crypto.ProtocolMagic">ProtocolMagicId</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:k" class="def">k</a> :: !<a href="Cardano-Chain-Common.html#t:BlockCount" title="Cardano.Chain.Common">BlockCount</a></dfn><div class="doc"><p>TODO: this is the chain security parameter, a.k.a. <code>stableAfter</code>, it is not part
 of our protocol parameters, so it seems that we need to pass it in the
 environment. However we need to double-check this with others.</p></div></li><li><dfn class="src"><a id="v:currentSlot" class="def">currentSlot</a> :: !<a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:numGenKeys" class="def">numGenKeys</a> :: !<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Word8" title="Distribution.Compat.Prelude">Word8</a></dfn><div class="doc"><p>Number of genesis keys. This is used to calculate the proportion of
 genesis keys that need to endorse a new protocol version for it to be
 considered for adoption. See
 <code>Cardano.Chain.Update.Validation.Endorsement.Environment</code>.</p></div></li><li><dfn class="src"><a id="v:delegationMap" class="def">delegationMap</a> :: !<a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Size" title="Cardano.Ledger.Binary.Encoding">Size</a> <a href="#v:encodedListSizeExpr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Error:Eq:6"></span> <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Eq" title="Distribution.Compat.Prelude">Eq</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a></span> <a href="#t:Error" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Error:Eq:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Chain-Update-Validation-Interface.html">Cardano.Chain.Update.Validation.Interface</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:5" id="g:5"><h1>Interface functions</h1></a><div class="top"><p class="src"><a id="v:registerUpdate" class="def">registerUpdate</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> m =&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Environment" title="Cardano.Chain.Update.Validation.Interface">Environment</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Signal" title="Cardano.Chain.Update.Validation.Interface">Signal</a> -&gt; m <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> <a href="#v:registerUpdate" class="selflink">#</a></p><div class="doc"><p>Group together the other registration rules in a single rule</p><p>This corresponds to the <code>BUPI</code> rule in the Byron chain specification.</p></div></div><div class="top"><p class="src"><a id="v:registerProposal" class="def">registerProposal</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> m =&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Environment" title="Cardano.Chain.Update.Validation.Interface">Environment</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Update-Proposal.html#t:AProposal" title="Cardano.Chain.Update.Proposal">AProposal</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> <a href="#v:registerProposal" class="selflink">#</a></p><div class="doc"><p>Register an update proposal.</p><p>This corresponds to the <code>UPIREG</code> rule in the Byron ledger specification.</p></div></div><div class="top"><p class="src"><a id="v:registerVote" class="def">registerVote</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> m =&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Environment" title="Cardano.Chain.Update.Validation.Interface">Environment</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Update-Vote.html#t:AVote" title="Cardano.Chain.Update.Vote">AVote</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> <a href="#v:registerVote" class="selflink">#</a></p><div class="doc"><p>Register a vote for the given proposal.</p><p>This corresponds to the <code>UPIVOTE</code> rule in the Byron ledger</p></div></div><div class="top"><p class="src"><a id="v:registerEndorsement" class="def">registerEndorsement</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:Error" title="Cardano.Chain.Update.Validation.Interface">Error</a> m =&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:Environment" title="Cardano.Chain.Update.Validation.Interface">Environment</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Update-Validation-Endorsement.html#t:Endorsement" title="Cardano.Chain.Update.Validation.Endorsement">Endorsement</a> -&gt; m <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> <a href="#v:registerEndorsement" class="selflink">#</a></p><div class="doc"><p>Register an endorsement.</p><p>An endorsement represents the fact that a genesis key is ready to start using
 the protocol version being endorsed. In the decentralized era only genesis
 key holders can endorse protocol versions.</p><p>This corresponds to the <code>UPIEND</code> rule in the Byron ledger
 specification.</p></div></div><div class="top"><p class="src"><a id="v:registerEpoch" class="def">registerEpoch</a> <a href="#v:registerEpoch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Cardano-Chain-Update-Validation-Interface.html#t:Environment" title="Cardano.Chain.Update.Validation.Interface">Environment</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Slotting.html#t:EpochNumber" title="Cardano.Chain.Slotting">EpochNumber</a></td><td class="doc"><p>Epoch seen on the block.</p></td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Register an epoch. Whenever an epoch number is seen on a block this epoch
 number should be passed to this function so that on epoch change the
 protocol parameters can be updated, provided that there is an update
 candidate that was accepted and endorsed by a majority of the genesis keys.</p><p>This corresponds to the <code>UPIEC</code> rules in the Byron ledger specification.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>