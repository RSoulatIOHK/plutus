<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Chain.Block</title><link href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Size" title="Cardano.Ledger.Binary.Encoding">Size</a></li><li class="src short"><a href="#v:abobHdrFromBlock">abobHdrFromBlock</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundary" title="Cardano.Chain.Block">ABlockOrBoundary</a> a -&gt; <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a</li><li class="src short"><a href="#v:abobHdrSlotNo">abobHdrSlotNo</a> :: <a href="Cardano-Chain-Slotting.html#t:EpochSlots" title="Cardano.Chain.Slotting">EpochSlots</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a></li><li class="src short"><a href="#v:abobHdrChainDifficulty">abobHdrChainDifficulty</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="Cardano-Chain-Common.html#t:ChainDifficulty" title="Cardano.Chain.Common">ChainDifficulty</a></li><li class="src short"><a href="#v:abobHdrHash">abobHdrHash</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a></li><li class="src short"><a href="#v:abobHdrPrevHash">abobHdrPrevHash</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Maybe" title="Distribution.Compat.Prelude">Maybe</a> <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BlockValidationMode" class="def">BlockValidationMode</a> <a href="#t:BlockValidationMode" class="selflink">#</a></p><div class="doc"><p>Indicates what sort of block validation should be performed.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BlockValidation" class="def">BlockValidation</a></td><td class="doc"><p>Perform all block validations.</p></td></tr><tr><td class="src"><a id="v:NoBlockValidation" class="def">NoBlockValidation</a></td><td class="doc"><p>Perform no block validations.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BlockValidationMode">Instances</h4><details id="i:BlockValidationMode" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlockValidationMode:Show:1"></span> <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Show" title="Distribution.Compat.Prelude">Show</a> <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a></span> <a href="#t:BlockValidationMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlockValidationMode:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Chain-Block-ValidationMode.html">Cardano.Chain.Block.ValidationMode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Int" title="Distribution.Compat.Prelude">Int</a> -&gt; <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:ShowS" title="Distribution.Compat.Prelude">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a>] -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:ShowS" title="Distribution.Compat.Prelude">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlockValidationMode:Eq:2"></span> <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Eq" title="Distribution.Compat.Prelude">Eq</a> <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a></span> <a href="#t:BlockValidationMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlockValidationMode:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Chain-Block-ValidationMode.html">Cardano.Chain.Block.ValidationMode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:toTxValidationMode" class="def">toTxValidationMode</a> :: <a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a> -&gt; <a href="Cardano-Chain-UTxO.html#t:TxValidationMode" title="Cardano.Chain.UTxO">TxValidationMode</a> <a href="#v:toTxValidationMode" class="selflink">#</a></p><div class="doc"><p>Translate a <code><a href="Cardano-Chain-Block.html#t:BlockValidationMode" title="Cardano.Chain.Block">BlockValidationMode</a></code> to an appropriate <code><a href="Cardano-Chain-UTxO.html#t:TxValidationMode" title="Cardano.Chain.UTxO">TxValidationMode</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:adoptedProtocolParameters" class="def">adoptedProtocolParameters</a> :: <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Update.html#t:ProtocolParameters" title="Cardano.Chain.Update">ProtocolParameters</a> <a href="#v:adoptedProtocolParameters" class="selflink">#</a></p><div class="doc"><p>Adopted protocol parameters</p></div></div><div class="top"><p class="src"><a id="v:updateBody" class="def">updateBody</a> :: (<a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ChainValidationError" title="Cardano.Chain.Block">ChainValidationError</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> <a href="Cardano-Chain-ValidationMode.html#t:ValidationMode" title="Cardano.Chain.ValidationMode">ValidationMode</a> m) =&gt; <a href="Cardano-Chain-Block.html#t:BodyEnvironment" title="Cardano.Chain.Block">BodyEnvironment</a> -&gt; <a href="Cardano-Chain-Block.html#t:BodyState" title="Cardano.Chain.Block">BodyState</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABlock" title="Cardano.Chain.Block">ABlock</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Block.html#t:BodyState" title="Cardano.Chain.Block">BodyState</a> <a href="#v:updateBody" class="selflink">#</a></p><div class="doc"><p>This is an implementation of the BBODY rule as per the chain specification.</p><p>Compared to <code>updateChain</code>, this does not validate any header level checks,
   nor does it carry out anything which might be considered part of the
   protocol.</p></div></div><div class="top"><p class="src"><a id="v:updateChainBlockOrBoundary" class="def">updateChainBlockOrBoundary</a> :: (<a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ChainValidationError" title="Cardano.Chain.Block">ChainValidationError</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> <a href="Cardano-Chain-ValidationMode.html#t:ValidationMode" title="Cardano.Chain.ValidationMode">ValidationMode</a> m) =&gt; <a href="Cardano-Chain-Genesis.html#t:Config" title="Cardano.Chain.Genesis">Config</a> -&gt; <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABlockOrBoundary" title="Cardano.Chain.Block">ABlockOrBoundary</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> <a href="#v:updateChainBlockOrBoundary" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:updateChainBoundary" class="def">updateChainBoundary</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ChainValidationError" title="Cardano.Chain.Block">ChainValidationError</a> m =&gt; <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABoundaryBlock" title="Cardano.Chain.Block">ABoundaryBlock</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> <a href="#v:updateChainBoundary" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:epochTransition" class="def">epochTransition</a> :: <a href="Cardano-Chain-Block.html#t:EpochEnvironment" title="Cardano.Chain.Block">EpochEnvironment</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a> -&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> <a href="#v:epochTransition" class="selflink">#</a></p><div class="doc"><p>Perform epoch transition if we have moved across the epoch boundary</p><p>We pass through to the update interface UPIEC rule, which adopts any
   confirmed proposals and cleans up the state. This corresponds to the EPOCH
   rules from the Byron chain specification.</p></div></div><div class="top"><p class="src"><a id="v:headerIsValid" class="def">headerIsValid</a> :: (<a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ChainValidationError" title="Cardano.Chain.Block">ChainValidationError</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> <a href="Cardano-Chain-ValidationMode.html#t:ValidationMode" title="Cardano.Chain.ValidationMode">ValidationMode</a> m) =&gt; <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a> -&gt; <a href="Cardano-Chain-Block.html#t:AHeader" title="Cardano.Chain.Block">AHeader</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m () <a href="#v:headerIsValid" class="selflink">#</a></p><div class="doc"><p>This is an implementation of the headerIsValid function from the Byron
   chain specification</p></div></div><div class="top"><p class="src"><a id="v:validateHeaderMatchesBody" class="def">validateHeaderMatchesBody</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ProofValidationError" title="Cardano.Chain.Block">ProofValidationError</a> m =&gt; <a href="Cardano-Chain-Block.html#t:AHeader" title="Cardano.Chain.Block">AHeader</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABody" title="Cardano.Chain.Block">ABody</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m () <a href="#v:validateHeaderMatchesBody" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:updateBlock" class="def">updateBlock</a> :: (<a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Block.html#t:ChainValidationError" title="Cardano.Chain.Block">ChainValidationError</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> <a href="Cardano-Chain-ValidationMode.html#t:ValidationMode" title="Cardano.Chain.ValidationMode">ValidationMode</a> m) =&gt; <a href="Cardano-Chain-Genesis.html#t:Config" title="Cardano.Chain.Genesis">Config</a> -&gt; <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABlock" title="Cardano.Chain.Block">ABlock</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; m <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> <a href="#v:updateBlock" class="selflink">#</a></p><div class="doc"><p>This represents the CHAIN rule. It is intended more for use in tests than
   in a real implementation, which will want to invoke its constituent rules
   directly.</p><p>Note that this also updates the previous block hash, which would usually be
   done as part of the PBFT rule.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BodyState" class="def">BodyState</a> <a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-ProtocolMagic.html#t:ProtocolMagicId" title="Cardano.Crypto.ProtocolMagic">ProtocolMagicId</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:k" class="def">k</a> :: !<a href="Cardano-Chain-Common.html#t:BlockCount" title="Cardano.Chain.Common">BlockCount</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:allowedDelegators" class="def">allowedDelegators</a> :: !(<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Set" title="Distribution.Compat.Prelude">Set</a> <a href="Cardano-Chain-Common.html#t:KeyHash" title="Cardano.Chain.Common">KeyHash</a>)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:delegationMap" class="def">delegationMap</a> :: !<a href="Cardano-Chain-Delegation.html#t:Map" title="Cardano.Chain.Delegation">Map</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:currentEpoch" class="def">currentEpoch</a> :: !<a href="Cardano-Chain-Slotting.html#t:EpochNumber" title="Cardano.Chain.Slotting">EpochNumber</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainValidationState" class="def">ChainValidationState</a> <a href="#t:ChainValidationState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ChainValidationState" class="def">ChainValidationState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cvsLastSlot" class="def">cvsLastSlot</a> :: !<a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cvsPreviousHash" class="def">cvsPreviousHash</a> :: !(<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Either" title="Distribution.Compat.Prelude">Either</a> <a href="Cardano-Chain-Genesis.html#t:GenesisHash" title="Cardano.Chain.Genesis">GenesisHash</a> <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a>)</dfn><div class="doc"><p>GenesisHash for the previous hash of the zeroth boundary block and
   HeaderHash for all others.</p></div></li><li><dfn class="src"><a id="v:cvsUtxo" class="def">cvsUtxo</a> :: !<a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Size" title="Cardano.Ledger.Binary.Encoding">Size</a> <a href="#v:encodedListSizeExpr" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainValidationState:NFData:7"></span> <a href="https://hackage.haskell.org/package/nothunks-0.1.5/docs/NoThunks-Class.html#t:ThunkInfo" title="NoThunks.Class">ThunkInfo</a>) <a href="#v:wNoThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> :: <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Proxy" title="Distribution.Compat.Prelude">Proxy</a> <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ChainValidationState:Rep:10"></span> <span class="keyword">type</span> <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a></span> <a href="#t:ChainValidationState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ChainValidationState:Rep:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Chain-Block-Validation.html">Cardano.Chain.Block.Validation</a></p> <div class="src"><span class="keyword">type</span> <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> = <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;ChainValidationState&quot; &quot;Cardano.Chain.Block.Validation&quot; &quot;cardano-ledger-byron-1.0.1.0-inplace&quot; '<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:False" title="Distribution.Compat.Prelude">False</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;ChainValidationState&quot; '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:True" title="Distribution.Compat.Prelude">True</a>) ((<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;cvsLastSlot&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a>) <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;cvsPreviousHash&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Either" title="Distribution.Compat.Prelude">Either</a> <a href="Cardano-Chain-Genesis.html#t:GenesisHash" title="Cardano.Chain.Genesis">GenesisHash</a> <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a>))) <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;cvsUtxo&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Chain-UTxO-UTxO.html#t:UTxO" title="Cardano.Chain.UTxO.UTxO">UTxO</a>) <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;cvsUpdateState&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Chain-Update-Validation-Interface.html#t:State" title="Cardano.Chain.Update.Validation.Interface">State</a>) <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;cvsDelegationState&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Chain-Delegation-Validation-Interface.html#t:State" title="Cardano.Chain.Delegation.Validation.Interface">State</a>)))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:initialChainValidationState" class="def">initialChainValidationState</a> :: <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Cardano-Chain-Delegation-Validation-Scheduling.html#t:Error" title="Cardano.Chain.Delegation.Validation.Scheduling">Error</a> m =&gt; <a href="Cardano-Chain-Genesis.html#t:Config" title="Cardano.Chain.Genesis">Config</a> -&gt; m <a href="Cardano-Chain-Block.html#t:ChainValidationState" title="Cardano.Chain.Block">ChainValidationState</a> <a href="#v:initialChainValidationState" class="selflink">#</a></p><div class="doc"><p>Create the state needed to validate the zeroth epoch of the chain. The
   zeroth epoch starts with a boundary block where the previous hash is the
   genesis hash.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainValidationError" class="def">ChainValidationError</a> <a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-Hashing.html#t:Hash" title="Cardano.Crypto.Hashing">Hash</a> <a href="Cardano-Chain-Delegation.html#t:Payload" title="Cardano.Chain.Delegation">Payload</a>)) <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#v:Just" title="Distribution.Compat.Prelude">Just</a> &quot;proofUpdate&quot;) '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:SourceStrict" title="GHC.Generics">SourceStrict</a> '<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#v:DecidedStrict" title="GHC.Generics">DecidedStrict</a>) (<a href="https://hackage.haskell.org/package/base-4.18.2.1/docs/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-Chain-Update.html#t:Proof" title="Cardano.Chain.Update">Proof</a>))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ProofValidationError" class="def">ProofValidationError</a> <a href="#t:ProofValidationError" class="selflink">#</a></p><div class="doc"><p>Error which can result from attempting to validate an invalid payload
 proof.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DelegationProofValidationError" class="def">DelegationProofValidationError</a></td><td class="doc"><p>The delegation payload proof did not match</p></td></tr><tr><td class="src"><a id="v:UTxOProofValidationError" class="def">UTxOProofValidationError</a></td><td class="doc"><p>The UTxO payload proof did not match</p></td></tr><tr><td class="src"><a id="v:UpdateProofValidationError" class="def">UpdateProofValidationError</a></td><td class="doc"><p>The update payload proof did not match</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ProofValidationError">Instances</h4><details id="i:ProofValidationError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProofValidationError:Show:1"></span> <a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-ProtocolMagic.html#t:ProtocolMagicId" title="Cardano.Crypto.ProtocolMagic">ProtocolMagicId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Either" title="Distribution.Compat.Prelude">Either</a> <a href="Cardano-Chain-Genesis.html#t:GenesisHash" title="Cardano.Chain.Genesis">GenesisHash</a> <a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Slotting.html#t:EpochSlots" title="Cardano.Chain.Slotting">EpochSlots</a></td><td class="doc"><p>Number of slots per epoch. This is needed to convert the slot number to
 the legacy format used in <code><a href="Cardano-Chain-Block.html#t:ToSign" title="Cardano.Chain.Block">ToSign</a></code>, where a slot is identified by the
 epoch to which it belongs and the offset within that epoch (counted in
 number of slots).</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-Signing.html#t:SigningKey" title="Cardano.Crypto.Signing">SigningKey</a></code></p></td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Block.html#t:Body" title="Cardano.Chain.Block">Body</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Update.html#t:ProtocolVersion" title="Cardano.Chain.Update">ProtocolVersion</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Update.html#t:SoftwareVersion" title="Cardano.Chain.Update">SoftwareVersion</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Make a <code><a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></code> for a given slot, with a given body, parent hash,
   and difficulty. This takes care of some signing and consensus data.</p></div></div><a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORHeader" class="selflink">#</a></p><div class="doc"><p>Encode a header, without taking in to account deprecated epoch boundary
 blocks.</p></div></div><div class="top"><p class="src"><a id="v:encCBORHeaderSize" class="def">encCBORHeaderSize</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORHeaderToHash" class="selflink">#</a></p><div class="doc"><p>Encode a <code><a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></code> accounting for deprecated epoch boundary blocks</p><p>This encoding is only used when hashing the header for backwards
   compatibility, but should not be used when serializing a header within a
   block</p></div></div><div class="top"><p class="src"><a id="v:decCBORAHeader" class="def">decCBORAHeader</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Decoding.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding">Decoder</a> s (<a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Maybe" title="Distribution.Compat.Prelude">Maybe</a> <a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a>) <a href="#v:decCBORHeaderToHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:wrapHeaderBytes" class="def">wrapHeaderBytes</a> :: <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="#v:wrapHeaderBytes" class="selflink">#</a></p><div class="doc"><p>These bytes must be prepended when hashing raw boundary header data</p><p>In the Byron release, hashes were taken over a data type that was never
   directly serialized to the blockchain, so these magic bytes cannot be
   determined from the raw header data.</p><p>These bytes are from `encodeListLen 2 &lt;&gt; encCBOR (1 :: Word8)`</p></div></div><div class="top"><p class="src"><a id="v:encCBORBlockVersions" class="def">encCBORBlockVersions</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORABoundaryHeader" class="selflink">#</a></p><div class="doc"><p>Encode from a boundary header with any annotation. This does not
 necessarily invert <code>decCBORBoundaryHeader</code>, because that decoder drops
 information that this encoder replaces, such as the body proof (assumes
 the body is empty) and the extra header data (sets it to empty map).</p></div></div><div class="top"><p class="src"><a id="v:encCBORABoundaryHeaderSize" class="def">encCBORABoundaryHeaderSize</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Decoding.html#t:ByteSpan" title="Cardano.Ledger.Binary.Decoding">ByteSpan</a>) <a href="#v:decCBORABoundaryHeader" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:boundaryHeaderHashAnnotated" class="def">boundaryHeaderHashAnnotated</a> :: <a href="Cardano-Chain-Block.html#t:ABoundaryHeader" title="Cardano.Chain.Block">ABoundaryHeader</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a> <a href="#v:boundaryHeaderHashAnnotated" class="selflink">#</a></p><div class="doc"><p>Compute the hash of a boundary block header from its annotation.
 It uses <code><a href="Cardano-Chain-Block.html#v:wrapBoundaryBytes" title="Cardano.Chain.Block">wrapBoundaryBytes</a></code>, for the hash must be computed on the header
 bytes tagged with the CBOR list length and tag discriminator, which is
 the encoding chosen by cardano-sl.</p></div></div><div class="top"><p class="src"><a id="v:wrapBoundaryBytes" class="def">wrapBoundaryBytes</a> :: <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="#v:wrapBoundaryBytes" class="selflink">#</a></p><div class="doc"><p>These bytes must be prepended when hashing raw boundary header data</p><p>In the Byron release, hashes were taken over a data type that was never
   directly serialized to the blockchain, so these magic bytes cannot be
   determined from the raw header data.</p></div></div><a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-Hashing.html#t:Hash" title="Cardano.Crypto.Hashing">Hash</a></code> of block header</p></div></div><div class="top"><p class="src"><a id="v:headerHashF" class="def">headerHashF</a> :: <a href="https://hackage.haskell.org/package/formatting-7.2.0/docs/Formatting-Internal.html#t:Format" title="Formatting.Internal">Format</a> r (<a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a> -&gt; r) <a href="#v:headerHashF" class="selflink">#</a></p><div class="doc"><p>Specialized formatter for <code><a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a></code></p></div></div><div class="top"><p class="src"><a id="v:hashHeader" class="def">hashHeader</a> :: <a href="Cardano-Chain-Slotting.html#t:EpochSlots" title="Cardano.Chain.Slotting">EpochSlots</a> -&gt; <a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a> -&gt; <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a> <a href="#v:hashHeader" class="selflink">#</a></p><div class="doc"><p>Hash the serialised representation of a <code><a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></code></p><p>For backwards compatibility we have to take the hash of the header
   serialised with <code><a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Decoding.html#t:Decoder" title="Cardano.Ledger.Binary.Decoding">Decoder</a> s <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:dropBoundaryExtraHeaderDataRetainGenesisTag" class="selflink">#</a></p><div class="doc"><p>When starting a new chain in ourorobos-consensus, we often start from a
   non-zero epoch. This is done in order to ensure synchronisation between
   nodes - we assume that the chain started at some fixed point in the past
   (e.g. midnight) which all nodes can agree on despite different node start
   times. However, the standard deserialisation assumes that the genesis EBB
   is precisely that in epoch zero.</p><p>In order to successfully round-trip a genesis EBB in a non-zero epoch,
   then, we add a &quot;magic&quot; tag which indicates the presense of the genesis
   hash. The choice of 255 and the word <a href="Genesis.html">Genesis</a> is completely arbitrary, and
   only done to correspond with the matching encoder. This encoding will only
   ever be seen when processing blocks from a demo.</p></div></div><div class="top"><p class="src"><a id="v:dropBoundaryBody" class="def">dropBoundaryBody</a> :: <a href="https://hackage.haskell.org/package/cardano-crypto-wrapper-1.5.1.2/docs/Cardano-Crypto-Signing.html#t:SigningKey" title="Cardano.Crypto.Signing">SigningKey</a></code></p></td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Block.html#t:Body" title="Cardano.Chain.Block">Body</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Block.html#t:Block" title="Cardano.Chain.Block">Block</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Smart constructor for <code><a href="Cardano-Chain-Block.html#t:Block" title="Cardano.Chain.Block">Block</a></code>, without requiring the entire previous
   <code><a href="Cardano-Chain-Block.html#t:Header" title="Cardano.Chain.Block">Header</a></code>. Instead, you give its hash and the difficulty of this block.
   These are derived from the previous header in <code><a href="Cardano-Chain-Block.html#v:mkBlock" title="Cardano.Chain.Block">mkBlock</a></code> so if you have
   the previous header, consider using that one.</p></div></div><a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORBlock" class="selflink">#</a></p><div class="doc"><p>Encode a block, given a number of slots-per-epoch.</p><p>Unlike <code><a href="Cardano-Chain-Block.html#v:encCBORABOBBlock" title="Cardano.Chain.Block">encCBORABOBBlock</a></code>, this function does not take the deprecated epoch
   boundary blocks into account.</p></div></div><div class="top"><p class="src"><a id="v:decCBORABlock" class="def">decCBORABlock</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Decoding.html#t:ByteSpan" title="Cardano.Ledger.Binary.Decoding">ByteSpan</a>) <a href="#v:decCBORABlockOrBoundary" class="selflink">#</a></p><div class="doc"><p>Decode a <code><a href="Cardano-Chain-Block.html#t:Block" title="Cardano.Chain.Block">Block</a></code> accounting for deprecated epoch boundary blocks</p><p>Previous versions of Cardano had an explicit boundary block between epochs.
   A <code><a href="Cardano-Chain-Block.html#t:Block" title="Cardano.Chain.Block">Block</a></code> was then represented as 'Either BoundaryBlock MainBlock'. We have
   now deprecated these explicit boundary blocks, but we still need to decode
   blocks in the old format. In the case that we find a boundary block, we
   drop it using <code>dropBoundaryBlock</code> and return a <code><a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORABlockOrBoundary" class="selflink">#</a></p></div><a href="#g:17" id="g:17"><h1>ABoundaryBlock</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ABoundaryBlock" class="def">ABoundaryBlock</a> a <a href="#t:ABoundaryBlock" class="selflink">#</a></p><div class="doc"><p>For a boundary block, we keep the header, body, and an annotation for
 the whole thing (commonly the bytes from which it was decoded).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ABoundaryBlock" class="def">ABoundaryBlock</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:boundaryBlockLength" class="def">boundaryBlockLength</a> :: !<a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORABoundaryBlock" class="selflink">#</a></p><div class="doc"><p>See note on <code><a href="Cardano-Chain-Block.html#v:encCBORABoundaryHeader" title="Cardano.Chain.Block">encCBORABoundaryHeader</a></code>. This as well does not necessarily
 invert the decoder <code><a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORABOBBoundary" class="selflink">#</a></p><div class="doc"><p>encCBORABoundaryBlock but with the list length and tag discriminator bytes.</p></div></div><div class="top"><p class="src"><a id="v:boundaryBlockSlot" class="def">boundaryBlockSlot</a> <a href="#v:boundaryBlockSlot" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Cardano-Chain-Slotting.html#t:EpochSlots" title="Cardano.Chain.Slotting">EpochSlots</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Word64" title="Distribution.Compat.Prelude">Word64</a></td><td class="doc"><p>Epoch number</p></td></tr><tr><td class="src">-&gt; <a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Compute the slot number assigned to a boundary block</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ABoundaryBody" class="def">ABoundaryBody</a> a <a href="#t:ABoundaryBody" class="selflink">#</a></p><div class="doc"><p>For boundary body data, we only keep an annotation. It's the body and
 extra body data.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ABoundaryBody" class="def">ABoundaryBody</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:boundaryBodyAnnotation" class="def">boundaryBodyAnnotation</a> :: !a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ABoundaryBody">Instances</h4><details id="i:ABoundaryBody" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ABoundaryBody:Functor:1"></span> <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Encoding" title="Cardano.Ledger.Binary.Encoding">Encoding</a> <a href="#v:encCBORABlockOrBoundaryHdr" class="selflink">#</a></p><div class="doc"><p>Encoder for <code><a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a></code> which is using the annotation.
 It is right inverse of <code>decCBORAblockOrBoundaryHdr</code>.</p><p>TODO: add a round trip test, e.g.</p><pre>decCBORABlockOrBoundaryHdr . encCBORABlockOrBoundaryHdr = id</pre><p>which does not type check, but convey the meaning.</p></div></div><div class="top"><p class="src"><a id="v:encCBORABlockOrBoundaryHdrSize" class="def">encCBORABlockOrBoundaryHdrSize</a> :: <a href="https://hackage.haskell.org/package/cardano-ledger-binary-1.3.3.0/docs/Cardano-Ledger-Binary-Encoding.html#t:Size" title="Cardano.Ledger.Binary.Encoding">Size</a> <a href="#v:encCBORABlockOrBoundaryHdrSize" class="selflink">#</a></p><div class="doc"><p>The size computation is compatible with <code><a href="Cardano-Chain-Block.html#v:encCBORABlockOrBoundaryHdr" title="Cardano.Chain.Block">encCBORABlockOrBoundaryHdr</a></code></p></div></div><div class="top"><p class="src"><a id="v:abobHdrFromBlock" class="def">abobHdrFromBlock</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundary" title="Cardano.Chain.Block">ABlockOrBoundary</a> a -&gt; <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a <a href="#v:abobHdrFromBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:abobHdrSlotNo" class="def">abobHdrSlotNo</a> :: <a href="Cardano-Chain-Slotting.html#t:EpochSlots" title="Cardano.Chain.Slotting">EpochSlots</a> -&gt; <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="Cardano-Chain-Slotting.html#t:SlotNumber" title="Cardano.Chain.Slotting">SlotNumber</a> <a href="#v:abobHdrSlotNo" class="selflink">#</a></p><div class="doc"><p>Slot number of the header</p><p>NOTE: Epoch slot number calculation must match the one in <code>applyBoundary</code>.</p></div></div><div class="top"><p class="src"><a id="v:abobHdrChainDifficulty" class="def">abobHdrChainDifficulty</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="Cardano-Chain-Common.html#t:ChainDifficulty" title="Cardano.Chain.Common">ChainDifficulty</a> <a href="#v:abobHdrChainDifficulty" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:abobHdrHash" class="def">abobHdrHash</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> <a href="https://hackage.haskell.org/package/bytestring-0.11.5.3/docs/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a> <a href="#v:abobHdrHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:abobHdrPrevHash" class="def">abobHdrPrevHash</a> :: <a href="Cardano-Chain-Block.html#t:ABlockOrBoundaryHdr" title="Cardano.Chain.Block">ABlockOrBoundaryHdr</a> a -&gt; <a href="https://hackage.haskell.org/package/Cabal-syntax-3.10.3.0/docs/Distribution-Compat-Prelude.html#t:Maybe" title="Distribution.Compat.Prelude">Maybe</a> <a href="Cardano-Chain-Block.html#t:HeaderHash" title="Cardano.Chain.Block">HeaderHash</a> <a href="#v:abobHdrPrevHash" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>